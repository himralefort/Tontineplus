{% extends "base.html" %}

{% block content %}
<!-- Hero Section - Glassmorphism Design -->
<section class="hero-section bg-dark text-white position-relative overflow-hidden">
  <div class="container py-8 py-lg-10">
    <div class="row align-items-center g-5">
      <div class="col-lg-6 position-relative z-index-2">
        <h1 class="display-3 fw-bold mb-4 animate__animated animate__fadeInUp">Bonjour, <span class="text-primary">{{ user.first_name }}</span>!</h1>
        <p class="lead mb-5 text-muted animate__animated animate__fadeInUp animate__delay-1s">Votre plateforme premium de gestion de tontines digitales</p>
        <div class="d-flex flex-wrap gap-3 animate__animated animate__fadeInUp animate__delay-2s">
          <a href="{{ url_for('dashboard') }}" class="btn btn-primary btn-lg px-5 rounded-pill shadow-lg">
            <i class="bi bi-speedometer2 me-2"></i>Tableau de bord
          </a>
          <a href="{{ url_for('tontine_create') }}" class="btn btn-outline-light btn-lg px-5 rounded-pill">
            <i class="bi bi-plus-circle me-2"></i>Créer
          </a>
        </div>
      </div>
      <div class="col-lg-6 d-none d-lg-block position-relative">
        <div class="floating-card animate__animated animate__fadeIn">
          <img src="{{ url_for('static', filename='images/dashboard-app-3d.png') }}" alt="App Dashboard" class="img-fluid rounded-4 shadow-lg">
        </div>
      </div>
    </div>
  </div>
  <div class="hero-shape"></div>
</section>

{% if has_tontines %}
<!-- Dashboard Section - Neumorphism Cards -->
<section class="py-7 py-lg-9">
  <div class="container">
    <div class="text-center mb-6 mb-lg-8">
      <h2 class="fw-bold display-5 mb-3">Votre activité récente</h2>
      <p class="text-muted fs-lg">Suivi en temps réel de vos tontines et transactions</p>
    </div>

    <div class="row g-5">
      <!-- Tontines Card -->
      <div class="col-lg-6">
        <div class="neumorphism-card h-100">
          <div class="card-header border-0 bg-transparent py-4 px-5">
            <div class="d-flex justify-content-between align-items-center">
              <h3 class="h4 mb-0"><i class="bi bi-people-fill text-primary me-3"></i> Vos tontines</h3>
              <a href="{{ url_for('tontines_list') }}" class="btn btn-sm btn-soft-primary">Voir tout</a>
            </div>
          </div>
          <div class="card-body px-5 pt-0 pb-5">
            {% if user_tontines %}
              <div class="list-group list-group-minimal">
                {% for tontine in user_tontines %}
                <a href="{{ url_for('tontine_detail', tontine_id=tontine.id) }}" 
                   class="list-group-item list-group-item-action border-0 py-3 px-0">
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center">
                      <div class="icon-circle bg-primary-light me-4">
                        <i class="bi bi-people text-primary"></i>
                      </div>
                      <div>
                        <h6 class="mb-1">{{ tontine.name }}</h6>
                        <div class="d-flex flex-wrap gap-2 mt-2">
                          <span class="badge bg-primary-soft">{{ tontine.current_members }} membres</span>
                          <span class="text-muted">{{ tontine.amount_per_member|format_currency }} XOF/membre</span>
                        </div>
                      </div>
                    </div>
                    <span class="badge bg-primary rounded-pill px-3 py-2">
                      {{ tontine.contributions|sum(attribute='amount')|format_currency }} XOF
                    </span>
                  </div>
                </a>
                {% endfor %}
              </div>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Transactions Card -->
      <div class="col-lg-6">
        <div class="neumorphism-card h-100">
          <div class="card-header border-0 bg-transparent py-4 px-5">
            <div class="d-flex justify-content-between align-items-center">
              <h3 class="h4 mb-0"><i class="bi bi-credit-card text-primary me-3"></i> Transactions</h3>
              <a href="{{ url_for('wallet') }}" class="btn btn-sm btn-soft-primary">Voir tout</a>
            </div>
          </div>
          <div class="card-body px-5 pt-0 pb-5">
            {% if transactions %}
              <div class="list-group list-group-minimal">
                {% for transaction in transactions %}
                <div class="list-group-item border-0 py-3 px-0">
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center">
                      <div class="icon-circle bg-{% if transaction.transaction_type == 'deposit' %}success-soft{% else %}warning-soft{% endif %} me-4">
                        <i class="bi bi-{% if transaction.transaction_type == 'deposit' %}arrow-down-circle text-success{% else %}arrow-up-circle text-warning{% endif %}"></i>
                      </div>
                      <div>
                        <h6 class="mb-1">{{ transaction.description }}</h6>
                        <small class="text-muted">{{ transaction.created_at|format_datetime }}</small>
                      </div>
                    </div>
                    <span class="fw-bold text-{% if transaction.transaction_type == 'deposit' %}success{% else %}warning{% endif %}">
                      {{ transaction.amount|format_currency }} XOF
                    </span>
                  </div>
                </div>
                {% endfor %}
              </div>
            {% else %}
              <div class="text-center py-5">
                <img src="{{ url_for('static', filename='images/empty-transactions.svg') }}" alt="No transactions" class="img-fluid mb-4" style="max-height: 120px;">
                <p class="text-muted">Aucune transaction récente</p>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% else %}
<!-- New User Section - Gradient Background -->
<section class="py-7 py-lg-9 bg-gradient-primary-soft">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8 text-center">
        <div class="mb-6">
          <img src="{{ url_for('static', filename='images/welcome-illustration.svg') }}" alt="Welcome" class="img-fluid" style="max-height: 220px;">
        </div>
        <h2 class="display-5 fw-bold mb-4">Commencez votre aventure</h2>
        <p class="lead text-muted mb-5">
          Rejoignez la révolution des tontines digitales en quelques clics
        </p>
        <div class="d-flex flex-wrap justify-content-center gap-3">
          <a href="{{ url_for('tontines_list') }}" class="btn btn-primary btn-lg px-5 rounded-pill shadow">
            <i class="bi bi-search me-2"></i>Explorer
          </a>
          <a href="{{ url_for('tontine_create') }}" class="btn btn-outline-primary btn-lg px-5 rounded-pill">
            <i class="bi bi-lightning-charge me-2"></i>Créer
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
{% endif %}

<!-- Features Section - Grid Layout -->
<section class="py-7 py-lg-9">
  <div class="container">
    <div class="row justify-content-center mb-6 mb-lg-8">
      <div class="col-lg-8 text-center">
        <h2 class="display-5 fw-bold mb-3">Fonctionnalités exclusives</h2>
        <p class="text-muted fs-lg">Une expérience premium pour gérer vos tontines en toute sérénité</p>
      </div>
    </div>

    <div class="row g-4 g-lg-5">
      <div class="col-md-6 col-lg-4">
        <div class="feature-card">
          <div class="feature-icon bg-primary-light">
            <i class="bi bi-shield-lock text-primary"></i>
          </div>
          <h4>Sécurité maximale</h4>
          <p class="text-muted">Transactions cryptées et protocoles de sécurité bancaire pour vos fonds.</p>
        </div>
      </div>
      
      <div class="col-md-6 col-lg-4">
        <div class="feature-card">
          <div class="feature-icon bg-success-light">
            <i class="bi bi-graph-up text-success"></i>
          </div>
          <h4>Analytique avancée</h4>
          <p class="text-muted">Tableaux de bord intuitifs et rapports détaillés en temps réel.</p>
        </div>
      </div>
      
      <div class="col-md-6 col-lg-4">
        <div class="feature-card">
          <div class="feature-icon bg-warning-light">
            <i class="bi bi-bell text-warning"></i>
          </div>
          <h4>Notifications intelligentes</h4>
          <p class="text-muted">Alertes personnalisées pour ne jamais manquer une échéance.</p>
        </div>
      </div>
      
      <div class="col-md-6 col-lg-4">
        <div class="feature-card">
          <div class="feature-icon bg-info-light">
            <i class="bi bi-phone text-info"></i>
          </div>
          <h4>Mobile first</h4>
          <p class="text-muted">Application optimisée pour tous vos appareils mobiles.</p>
        </div>
      </div>
      
      <div class="col-md-6 col-lg-4">
        <div class="feature-card">
          <div class="feature-icon bg-danger-light">
            <i class="bi bi-chat-dots text-danger"></i>
          </div>
          <h4>Support premium</h4>
          <p class="text-muted">Assistance 24/7 avec nos experts dédiés.</p>
        </div>
      </div>
      
      <div class="col-md-6 col-lg-4">
        <div class="feature-card">
          <div class="feature-icon bg-purple-light">
            <i class="bi bi-currency-exchange text-purple"></i>
          </div>
          <h4>Multi-devises</h4>
          <p class="text-muted">Gérez vos tontines dans la devise de votre choix.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- CTA Section -->
<section class="py-7 py-lg-9 bg-dark text-white">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-8 mb-5 mb-lg-0">
        <h2 class="display-5 fw-bold mb-3">Prêt à révolutionner votre expérience tontine?</h2>
        <p class="lead text-muted mb-0">Rejoignez des milliers d'utilisateurs satisfaits dès aujourd'hui.</p>
      </div>
      <div class="col-lg-4 text-lg-end">
        <a href="{{ url_for('tontine_create') }}" class="btn btn-primary btn-lg px-5 rounded-pill shadow">
          Commencer maintenant <i class="bi bi-arrow-right ms-2"></i>
        </a>
      </div>
    </div>
  </div>
</section>
{% endblock %}
